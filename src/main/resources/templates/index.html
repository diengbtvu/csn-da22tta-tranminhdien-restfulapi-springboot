<!DOCTYPE html>
<html lang="vi" xmlns:th="htttp://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>Dashboard</title>

    <meta name="description" content="overview & stats" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <!-- Font Awesome 4.2.0 -->
    <link rel="stylesheet" href="assets/font-awesome/4.2.0/css/font-awesome.min.css" />

    <!-- Bootstrap Icons CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">

    <!-- Text fonts -->
    <link rel="stylesheet" href="assets/fonts/fonts.googleapis.com.css" />

    <!-- Ace styles -->
    <link rel="stylesheet" href="assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
    <![endif]-->

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
    <![endif]-->

    <!-- Ace settings handler -->
    <script src="assets/js/ace-extra.min.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
<style>
    .sidebar {
    height: 100vh;
    background-color: #343a40;
    position: fixed;
    top: 0;
    left: 0;
    }

    .sidebar .nav-list {
    padding: 0;
    }

    .sidebar .nav-list > li {
    margin-bottom: 0;
    width: 100%;
    }

    .sidebar .nav-link {
    color: #fff;
    padding: 15px;
    border-radius: 5px;
    margin: 5px;
    display: flex;
    align-items: center;
    }

    .sidebar .nav-link > .menu-icon {
    margin-right: 10px;
    display: inline-block;
    min-width: 1.25em;
    }

    .sidebar .nav-link > .menu-text {
    display: inline-block;
    }

    .sidebar .nav-link:hover {
    background-color: #495057;
    }

    .sidebar .nav-link.active {
    background-color: #0d6efd;
    }

    .dashboard-card {
    transition: transform 0.2s;
    }

    .dashboard-card:hover {
    transform: translateY(-5px);
    }

    .chart-container {
    height: 300px;
    }

    .container-fluid {
    padding-right: 0px;
    padding-left: 0px;
    margin-right: auto;
    margin-left: auto;
    }

    #sidebar > ul > li {
    width: 100%;
    }

    * {
    font-family: 'Roboto', sans-serif;
    font-size: 14px;
    }

    .sidebar-shortcuts {
    margin: 10px;
    }

    .small, small {
    font-size: .875em;
    padding-left: 2rem;
    }

    .navbar {
    display: flex;
    justify-content: center;
    }

    .navbar-brand {
    display: flex;
    align-items: center;
    padding: 0 15px;
    font-size: 1.25rem;
    line-height: 1.5;
    color: #fff;
    text-decoration: none;
    white-space: nowrap;
    }


    .main-content {
    margin-left: 200px;
    min-height: calc(100vh - 120px); /* 45px là chiều cao của navbar */
    display: flex;
    flex-direction: column;
    }

    .main-content-inner {
    flex: 1;
    }

    .admin-footer {
    background-color: #f8f9fa;
    border-top: 1px solid #dee2e6;
    padding: 15px 0;
    font-size: 13px;
    color: #6c757d;
    margin-top: auto;
    }

    .admin-footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    margin-left: 200px;
    }

    .admin-footer-version {
    display: flex;
    align-items: center;
    }

    .admin-footer-version span {
    margin-left: 15px;
    padding-left: 15px;
    border-left: 1px solid #dee2e6;
    }
    </style>

</head>

<body class="no-skin">
<div id="navbar" class="navbar navbar-default">
    <script type="text/javascript">
        try{ace.settings.check('navbar' , 'fixed')}catch(e){}
    </script>



    <div class="navbar-header pull-left">
        <a href="#" class="navbar-brand">
            <small>
                <i class="bi bi-buildings"></i>
                Hệ thống quản lý căn hộ
            </small>
        </a>
    </div>


</div><!-- /.navbar-container -->
</div>

<div class="main-container" id="main-container">
    <script type="text/javascript">
        try{ace.settings.check('main-container' , 'fixed')}catch(e){}
    </script>

    <div id="sidebar" class="sidebar                  responsive">
        <script type="text/javascript">
            try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
        </script>

        <ul class="nav nav-list">
            <!-- Header sidebar -->
            <div style="padding: 20px 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 15px; background-color: #0d6efd;">
                <div style="color: #fff; font-size: 1.2rem; font-weight: 600; display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                    <i class="bi bi-buildings" style="font-size: 1.4rem;"></i>
                    <span>APARTMENT ADMIN</span>
                </div>
                <div style="display: flex; align-items: center; gap: 15px; padding: 10px 0;">
                    <div style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); display: flex; align-items: center; justify-content: center;">
                        <i class="bi bi-person-circle" style="color: #fff; font-size: 1.5rem;"></i>
                    </div>
                    <div style="color: #fff;">
                        <div style="font-weight: 500; font-size: 0.95rem; margin-bottom: 3px;">Admin User</div>
                        <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.9);">Administrator</div>
                    </div>
                </div>
            </div>

            <!-- Menu items giữ nguyên -->
            <li class="active">
                <a href="/" class="nav-link">
                    <i class="menu-icon fa fa-tachometer"></i>
                    <span class="menu-text"> Dashboard </span>
                </a>
                <b class="arrow"></b>
            </li>
            <li class="">
                <a href="/quanlycanho" class="nav-link">
                    <i class="menu-icon fa fa-building"></i>
                    <span class="menu-text"> Quản lý căn hộ </span>
                </a>
                <b class="arrow"></b>
            </li>
            <li class="">
                <a href="/quanlyhopdong" class="nav-link">
                    <i class="menu-icon fa fa-file-text-o"></i>
                    <span class="menu-text"> Quản lý Hợp đồng </span>
                </a>
                <b class="arrow"></b>
            </li>
            <li class="">
                <a href="/quanlykhachhang" class="nav-link">
                    <i class="menu-icon bi bi-people"></i>
                    <span class="menu-text"> Quản lý khách hàng </span>
                </a>
                <b class="arrow"></b>
            </li>

        </ul>
        <script type="text/javascript">
            try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
        </script>
    </div>

    <div class="main-content">
        <div class="main-content-inner">
            <div class="breadcrumbs" id="breadcrumbs">
                <script type="text/javascript">
                    try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
                </script>

            </div>

            <div class="page-content">
                <div class="container-fluid">
                    <div class="row">

                        <!-- Main Content -->
                        <div class="col-md-12 bg-light">

                            <!-- Dashboard Content -->
                            <div class="container-fluid py-4">
                                <!-- Stats Cards -->
                                <div class="row mb-4">
                                    <div class="col-md-3">
                                        <div class="card dashboard-card bg-primary text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">Tổng số căn hộ</h5>
                                                <h2 th:text="${numberOfApartment}" class="text-center display-4 fw-bold">0</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card dashboard-card bg-success text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">Căn hộ đã thuê</h5>
                                                <h2 th:text="${numberOfRented}" class="text-center display-4 fw-bold">0</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card dashboard-card bg-warning text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">Tổng số hợp đồng</h5>
                                                <h2 th:text="${numberOfContract}" class="text-center display-4 fw-bold">0</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="card dashboard-card bg-danger text-white">
                                            <div class="card-body">
                                                <h5 class="card-title">Tổng số khách hàng</h5>
                                                <h2 th:text="${numberOfCustomer}" class="text-center display-4 fw-bold">0</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Charts Row -->


                                <div class="row mb-4">
                                    <div class="col-md-6 min-vh-50 "  >
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="card-title mb-0">Tỷ lệ căn hộ</h5>
                                            </div>
                                            <div class="card-body">
                                                <canvas id="apartmentChart" class="chart-container"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 min-vh-50 ">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="card-title mb-0">Tỷ lệ hợp đồng</h5>
                                            </div>
                                            <div class="card-body">
                                                <canvas id="contractChar" class="chart-container"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                            </div>
                        </div>
                    </div>
                </div>

            </div><!-- /.page-content -->
            <!-- Thêm admin footer -->
            <!-- Thêm admin footer -->

        </div>
    </div><!-- /.main-content -->
</div><!-- /.main-container -->
<footer class="admin-footer">
    <div class="admin-footer-content">
        <div class="admin-footer-version">
            <div>© 2025 Hệ thống quản lý căn hộ</div>
            <span>Phiên bản 1.0.0</span>
            <span>Admin Dashboard</span>
        </div>
        <div class="admin-footer-info">
            <i class="bi bi-clock"></i> Server time: <span th:text="${#dates.format(#dates.createNow(), 'HH:mm:ss dd/MM/yyyy')}">00:00:00 01/01/2025</span>
        </div>
    </div>
</footer>
<!-- basic scripts -->

<!--[if !IE]> -->
<script src="assets/js/jquery.2.1.1.min.js"></script>

<!-- <![endif]-->

<!--[if IE]>
<script src="assets/js/jquery.1.11.1.min.js"></script>
<![endif]-->

<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='assets/js/jquery.min.js'>"+"<"+"/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='assets/js/jquery1x.min.js'>"+"<"+"/script>");
</script>
<![endif]-->
<script type="text/javascript">
    if('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
</script>
<script src="assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="assets/js/excanvas.min.js"></script>
<![endif]-->
<script src="assets/js/jquery-ui.custom.min.js"></script>
<script src="assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="assets/js/jquery.easypiechart.min.js"></script>
<script src="assets/js/jquery.sparkline.min.js"></script>
<script src="assets/js/jquery.flot.min.js"></script>
<script src="assets/js/jquery.flot.pie.min.js"></script>
<script src="assets/js/jquery.flot.resize.min.js"></script>

<!-- ace scripts -->
<script src="assets/js/ace-elements.min.js"></script>
<script src="assets/js/ace.min.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
<script th:inline="javascript">
    // Apartment Chart
    const numberRented = [[${numberOfRented}]];
    const totalApartments = [[${numberOfApartment}]];
    const vacant = totalApartments - numberRented;

    const apartmentChart = new Chart(document.getElementById('apartmentChart'), {
        type: 'doughnut',
        data: {
            labels: ['Đã thuê', 'Còn trống'],
            datasets: [{
                data: [numberRented, vacant],
                backgroundColor: ['#198754', '#ffc107']
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });


</script>

<script th:inline="javascript">

    const dhl = [[${contractDangHieuLuc}]];
    const ctt = [[${contractChuaThanhToan}]];
    const hhl = [[${contractHetHieuLuc}]];
    const dtt = [[${contractDaThanhToan}]];

    const contractStatusChart = new Chart(document.getElementById('contractChar'), {
        type: 'line',
        data: {
            labels: ['Đang hiệu lực', 'Chưa thanh toán', 'Hết hiệu lực', 'Đã thanh toán'],
            datasets: [{
                label: 'Trạng thái hợp đồng',
                data: [dhl, ctt, hhl, dtt],
                backgroundColor: 'rgba(13, 110, 253, 0.2)', // Nền dữ liệu (màu nhạt)
                borderColor: '#0d6efd', // Màu viền (màu chính)
                borderWidth: 2, // Độ dày đường kẻ
                pointBackgroundColor: ['#198754', '#ffc107', '#dc3545', '#0d6efd'], // Màu của từng điểm
                pointBorderColor: '#fff', // Viền của các điểm
                pointHoverRadius: 8, // Bán kính khi hover vào điểm
                tension: 0.4, // Độ cong của đường (mềm mại hơn)
                fill: true // Làm vùng dưới đường kẻ đổ màu
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    labels: {
                        color: '#495057', // Màu chữ của chú thích
                        font: {
                            size: 14 // Kích thước chữ chú thích
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return `${context.label}: ${context.raw}`;
                        }
                    }
                }
            },
            scales: {
                x: {
                    ticks: {
                        color: '#495057', // Màu chữ trục X
                        font: {
                            size: 12 // Kích thước chữ trục X
                        }
                    },
                    grid: {
                        color: '#e9ecef' // Màu lưới trục X
                    }
                },
                y: {
                    ticks: {
                        color: '#495057', // Màu chữ trục Y
                        font: {
                            size: 12 // Kích thước chữ trục Y
                        },
                        stepSize: 1 // Khoảng cách giữa các giá trị
                    },
                    grid: {
                        color: '#e9ecef' // Màu lưới trục Y
                    },
                    beginAtZero: true // Bắt đầu từ giá trị 0
                }
            }
        }
    });



</script>
<script>
    // Activate sidebar links
    $(document).ready(function() {
        $('.sidebar .nav-link').on('click', function() {
            $('.sidebar .nav-link').removeClass('active');
            $(this).addClass('active');
        });
    });
</script>



</body>
</style>
</html>